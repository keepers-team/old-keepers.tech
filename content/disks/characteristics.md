---
title: Характеристики дисков
weight: 1
---

У каждого Хранителя на одном диске обычно хранятся сотни, тысячи, или даже десятки тысяч раздач. Личей при этом не особо
волнует, как у вас хранятся данные — они просто скачивают нужную им раздачу. Обычно, одновременно раздаётся несколько
торрентов, что требует доступа к разным секторам диска. Такой режим работы и называется произвольным чтением. Именно эта
характеристика является основным параметром при выборе диска. Осложняется всё тем, что напрямую диск не имеет такой
характеристики. Здесь мы разберёмся, из чего она складывается, и как выбрать хороший диск для хранительства.

## SSD и HDD

Думаю, все примерно знают, как устроены и те, и другие накопители, и что SSD работают в несколько раз быстрее HDD.
При случайном чтении же это различие на порядок больше — SSD обеспечивает линейную скорость доступа к памяти, в HDD же
из-за конструктивных особенностей она зависит от многих факторов. Более того, жёсткие диски накапливают
механический износ при чтении, записи, да и просто во включенном состоянии, в то время как твёрдотельные накопители
(практически) не расходует ресурс при чтении.

Как видим, SSD явно выигрывают у HDD по всем параметрам (кто бы мог подумать?), но вот на практике почти никто не
использует SSD для хранения. Связано это конечно же с ценой — даже самый дешёвый SSD имеет цену за ТБ в 2-3 раза выше,
чем у HDD, более дорогие же и ёмкие накопители вообще оказываются "золотыми". HDD же даёт большой объём данных по
относительно низкой цене, а при [правильных настройках](../../client-configs/configs) торрент-клиента их
производительности
хватает для беспроблемной раздачи.

## Скорость вращения

> TL;DR, Диски на 7200 об/мин являются классическим вариантом, и обычно брать стоит именно их. 5400 об/мин можно взять,
> если ширина вашего канала менее 15 МБ/с на диск (уточнить), ну или, конечно, если диск вам достался очень дёшево.

Раздача торрентов оказывает довольно значительную нагрузку на жёсткий диск, так как это операция часто требует
произвольного чтения с диска. С точки зрения производительности жёсткие диски имеет два параметра — это скорость
последовательного чтения, и время доступа. Среднее время доступа как раз таки и является тем параметром, который влияет
на скорость произвольного чтения. Время доступа складывается из двух параметров — задержки вращения (avg. rotational
latency), время, за которое диск совершает половину оборота, и времени поиска, показывающего, как быстро позиционируется
головка. Задержка вращения всегда напрямую зависит от количества оборотов в
минуту, время поиска же не зависит от этого напрямую, однако обычно производителя ставят более медленные головки на
жёсткие диски с низким число оборотов, так как они не позиционируются, высокоскоростные. Ниже представлены типовые
значения для дисков WD:

| Скорость вращения, об/мин |       5400 | 7200 | 1000 | 15000 |
|:--------------------------|-----------:|-----:|-----:|------:|
| Время полуоборота , мс    |        5.6 |  4.2 |  3.0 |   2.0 |
| Среднее время поиска, мс  | (уточнить) |  8.5 |  5.5 |   3.8 |
| Среднее время доступа, мс | (уточнить) | 12.7 |  8.5 |   5.8 |

[Источник](https://htfi.ru/zhelezo/skorost_vracsheniya_shpindelya_zhestkogo_diska_5400_ili_7200_chto_luchshe.html)

> Следует отметить, что это скорее всего, данные для дорогих дисков. Так, на двух TOSHIBA HDWD110 замеренное время
> доступа составляет ~18.5 мс. Тем не менее принцип остаётся тот же: больше оборотов — быстрее доступ.

Получается, что в таком случае нужно брать диски на 15000, а лучше вообще на 20000 оборотов? Тут нужно помнить, что
всего есть своя цена, причём в буквально смысле. При небольшом приросте производительности, высокооборотные жёсткие
диски стоят намного дороже, а с появлением SSD они и вовсе стали нерентабельными. Кроме того, их сложно найти на
прилавках обычных магазинов, к тому же, зачастую это серверные диски, которые не подходят к обычному SATA-контроллеру.
Поэтому большинство современных дисков имеет скорость 5400 или 7200 об/мин.

## Ёмкость

{{% notice info %}}
Данный раздел ещё не написан. Вы можете помочь проекту, написав этот раздел. Обратитесь к кураторам в Telegram-канале
{{% /notice %}}

## Энергопотребление

## Черепичные диски (SMR)

{{% notice note %}}
Автор статьи не рекомендует покупать черепичные диски ни для чего угодно. Зачастую производители
сознательно не указывают явно (или вообще скрывают) использование данной технологии в своих дисках ввиду её серьёзных
недостатков. Вы сэкономите не так много денег (если вообще сэкономите), но рискуете получить много проблем. Не поощряйте
мошенников!
{{% /notice %}}

Так что же всё-таки такое черепичные диски, и что с ними не так? Не вдаваясь в технологические подробности, суть SMR
дисков в том, что каждая последующая дорожка записи накладывается на предыдущую как черепица. Это работает по той
причине, что пишущая головка в жёстких дисках больше, чем читающая, соответственно, наложение треков позволяет
уменьшить размер записанной дорожки до размера читающей головки. В сравнении с традиционными технологиями PMR и CMR
использование данного вида записи иногда даёт прирост до 25% ёмкости. "Но ведь больше места это же хорошо! — скажете
вы, — зачем производителям скрывать это?". Давайте разбираться.

Представьте, что вам понадобилось обновить один маленький файлик на диске, который находится в начале физического
дискового пространства. На обычном диске, где ширина дорожки равна ширине пишущей головки, для этого просто
перезаписывается область с файлом, и диск продолжат дальше работать. Но в SMR дисках ширина дорожки меньше, и пишущая
головка туда просто не сможет "пролезть", не задев соседнюю дорожку. Соответственно, соседнюю дорожку придётся так же
переписать, а затем следующую, и следующую, и так из-за одного файла придётся перезаписать весь диск! На самом деле, всё
не настолько ужасно, так как в реальности диски разделены на так называемые ленты, которые являются минимальной
перезаписываемой единицей в черепичном диске, вот только размер лент производители также посчитали нужным не разглашать,
так что сколько данных реально будет переписано, мы не узнаем.

Производители пытаются спрятать эту проблему, используя различные кэши, и выделяя на диске область с традиционной CMR
записью (медиа-кэш), но рано или поздно, при долгой произвольной записи, диск всё же впадает в ступор — скорость падает
практически до нуля, а время отклика может увеличиться вплоть до десятков секунд. Произвольная запись как раз таки
требуется при скачивании торрентов — даже если вы заранее зарезервируете место на диске, запись всё равно будет
происходить в разные участки созданного файла, поэтому черепичный диск **нельзя** использовать непосредственно для
скачивания файлов.

Что касается хранения уже скачанных файлов, здесь нет единого мнения. Как я указал выше, я бы в принципе не рекомендовал
SMR диски по следующим причинам:

1. Иногда всё равно потребуется перезапись. Торренты не меняются достаточно долго, но всё же они не абсолютно статичны.
   Раздачи могут удаляться, поглощаться и изменяться, и такое изменение потребует перезаписать большой кусок диска.
2. [Плохая совместимость с ZFS](https://www.opennet.ru/opennews/art.shtml?num=52867)
3. По тем же причинам SMR диски [непригодны для использования в RAID 5/6](https://habr.com/ru/post/497900/). Также
   недопустимо использовать одновременно SMR и не-SMR диски в RAID любого уровня.
4. С черепичных дисков сложнее восстановить данные. А с учётом того, что постоянная запись данных в медиа-кэш и обратно
   здоровья диску не прибавляет, данная услуга вам может быстро понадобится.
5. Ну и самое главное — вы ничего не сэкономите. В большинстве случаев, экономит здесь только производитель, продавая
   SMR диски по цене обычных. Исключением может быть разве что HM-SMR, когда компьютер сам управляет черепичной записью.
   Но без продвинутых навыков работы в UNIX вам с такими дисками не совладать, да и найти их довольно сложно.